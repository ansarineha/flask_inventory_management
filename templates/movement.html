{% extends 'base.html' %}

{% block title %} Movement {% endblock %}

{% block body %}

<div class="mov-container">
    <h2 class="text-center mt-3"> Movements</h2>
    <form action="/movement", method="POST">
        <div class="row">
            <div class="form-group col">
                <label for="from-location"> From Location </label>
                <select name="from-location" id="from-location" class="form-control">
                    <option value="none"> None </option>
                    {% for loc in locations %}
                    <option value="{{loc.id}}"> {{loc.name}} </option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group col">
                <label for="to-location"> To Location </label>
                <select name="to-location" id="to-location" class="form-control">
                    <option value="none"> None </option>
                    {% for loc in locations %}
                    <option value="{{loc.id}}"> {{loc.name}} </option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="row">
            <div class="form-group col">
                <label for="product"> product </label>
                <select name="product" id="product" class="form-control">
                    <option value="none"> None </option>
                    {% for prod in products %}
                    <option value="{{prod.id}}"> {{prod.name}} </option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group col">
                <label for="quantity"> Quantity </label>
                <input type="number" name="quantity" id="quantity" class="form-control" min="1">
            </div>
        </div>
        <button type="submit"> Add Movement </button>
    </form>

    {% if error %}
      <p class="text-danger"><strong>Error:</strong> {{ error }}
    {% endif %}


    <h2>
        Previous movements
    </h2>
    <table class="table table-bordered table-hover">
        <thead>
            <th>ID</th>
            <th>From</th>
            <th>To</th>
            <th>Product</th>
            <th>Quantity</th>
            <th>Actions</th>
        </thead>
        {% for mvmnt in movements %}
        <tr>
            <td>{{mvmnt.movement_id}}</td>
            <td>{{mvmnt.from_location.name}}</td>
            <td>{{mvmnt.to_location.name}}</td>
            <td>{{mvmnt.product.name}}</td>
            <td>{{mvmnt.quantity}}</td>
            <td>
                <a href="/movement/{{mvmnt.movement_id}}/update" class="btn btn-info"> Update </a>
                <a href="" class="btn btn-danger disabled">Delete</a>
            </td>
        </tr>
        {% endfor %}
    </table>
    
</div>
{% endblock %}